<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Notes by Dan Peirce B.Sc.">
  <title>IIC OLED V1.2</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="../../pandocbd.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">IIC OLED V1.2</h1>
<p class="author">Notes by Dan Peirce B.Sc.</p>
</header>
<nav id="TOC">
<ul>
<li><a href="#iic-oled-v1.2-notes">IIC OLED V1.2 Notes</a><ul>
<li><a href="#initial-testing-of-display">Initial Testing of Display</a><ul>
<li><a href="#wiring">Wiring</a></li>
<li><a href="#arduino-ide-setup">Arduino IDE Setup</a></li>
<li><a href="#demo-video">Demo Video</a></li>
<li><a href="#code-used-on-first-day">Code Used on First Day</a></li>
</ul></li>
<li><a href="#switching-to-current-adafruit-libraries-may-20-2018">Switching to Current Adafruit Libraries (May 20, 2018)</a><ul>
<li><a href="#adjustments-for-3rd-party-display.">Adjustments for 3rd Party Display.</a></li>
<li><a href="#forked-on-github">Forked on Github</a></li>
<li><a href="#explore-text-branch">Explore Text Branch</a></li>
<li><a href="#terminal-branch">Terminal Branch</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<!---
use pandoc -s --toc -t html5 -c ../../pandocbd.css oled-v1.2.md -o oled-v1.2.html
-->
<h1 id="iic-oled-v1.2-notes">IIC OLED V1.2 Notes</h1>
<p>The display was purchased from the Canadian version of the RobotShop website:</p>
<ul>
<li><a href="https://www.robotshop.com/ca/en/iic-128-64-oled-module-blue.html" class="uri">https://www.robotshop.com/ca/en/iic-128-64-oled-module-blue.html</a></li>
</ul>
<p>Unfortunately they don't provide up to date information for the OLED module. The datasheet is for a previous version. The Libraries supplied for the display are written by Adafruit.</p>
<figure>
<img src="explore_text.png" />
</figure>
<h2 id="initial-testing-of-display">Initial Testing of Display</h2>
<h3 id="wiring">Wiring</h3>
<p>Initial testing was done with an Ardunino Uno as this was what was shown in the datasheet. Note the silkscreen on the v1.2 board does not match the v1.1 datasheet with regard to the pinout. I followed the silkscreen.</p>
<ul>
<li>Pin Vcc to Arduino Uno 5+</li>
<li>Pin ground to Arduino Uno ground</li>
<li>cl to Arduino Uno A5</li>
<li>data to Arduiono Uno A4</li>
</ul>
<p>No ext4ernal pull ups were added!</p>
<h3 id="arduino-ide-setup">Arduino IDE Setup</h3>
<ol type="1">
<li><p>Downloaded and installed Arduino IDE for windows 7. (used installer for XP and up)</p>
<ul>
<li><a href="https://www.arduino.cc/en/Main/Software" class="uri">https://www.arduino.cc/en/Main/Software</a></li>
</ul></li>
<li><p>Downloaded libraries from elecfreaks site.</p>
<ul>
<li><a href="https://elecfreaks.com/estore/download/EF03155-Paintcode.zip" class="uri">https://elecfreaks.com/estore/download/EF03155-Paintcode.zip</a></li>
<li><a href="https://www.elecfreaks.com/estore/iic-oled.html" class="uri">https://www.elecfreaks.com/estore/iic-oled.html</a></li>
</ul>
<p>The libraries are actually from Adafruit. One can learn more about them here:</p>
<ul>
<li><a href="https://learn.adafruit.com/monochrome-oled-breakouts/arduino-library-and-examples" class="uri">https://learn.adafruit.com/monochrome-oled-breakouts/arduino-library-and-examples</a></li>
</ul></li>
<li>Extracted files/folders from zip file.</li>
<li><p>Two folders containing files were copied to c:\arduino\libraries</p></li>
</ol>
<pre><code>  C:\Users\Student\Downloads\EF03155-Paintcode\Code\Arduino_UNO_DEOM\Hardware I2C\Adafruit_GFX
  C:\Users\Student\Downloads\EF03155-Paintcode\Code\Arduino_UNO_DEOM\Hardware I2C\Adafruit_SSD1306</code></pre>
<ol start="5" type="1">
<li><p>A new example became available in the IDE</p>
<figure>
<img src="adafruit_ssd1306_example.png" />
</figure>
<p>The example was copied and pasted into a new sketch.</p></li>
<li><p>Initially the sketch would not compile. The compiler error indicated that a variable needed to be a constant to be placed in program memory. The following line was changed (line appears just after macro definitions near beginning of file).</p>
<ul>
<li><em>was --</em> static unsigned char PROGMEM logo16_glcd_bmp[] =</li>
<li><em>changed to --</em> static const unsigned char PROGMEM logo16_glcd_bmp[] =</li>
</ul>
<p>Once the <strong>const</strong> reserved word was added the sketch compiled.</p></li>
<li><p>The display still remained blank. An I<sup>2</sup>C scanner Arduino sketch was used to find that the board responded to the address <strong>0x3C</strong>. A line in the example was changed to include this address. Once this was done the display showed the example code.</p>
<ul>
<li>display.begin(SSD1306_SWITCHCAPVCC, 0x3C);</li>
</ul></li>
<li><p>Other modifications were made as I was interested in concentrating on the display of text rather than graphics.</p></li>
</ol>
<h3 id="demo-video">Demo Video</h3>
<p>This was recorded at the end of the day in a rush. I expect to get a better quality video soon -- it looks better in person. Also I will do some testing of different text sizes.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/nSQjUFMyLBs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
</iframe>
<h3 id="code-used-on-first-day">Code Used on First Day</h3>
<p>Code moved to new file to avoid clutter on this page.</p>
<ul>
<li><a href="ssd1306_128x64_i2c.ino.html" class="uri">ssd1306_128x64_i2c.ino.html</a></li>
</ul>
<h2 id="switching-to-current-adafruit-libraries-may-20-2018">Switching to Current Adafruit Libraries (May 20, 2018)</h2>
<p>It became apparent that the elecfreaks.com site provided an old version of the libraries and it seemed expedient to test the current version of the files.</p>
<p>It worked with a minor adjustment for the electfreak display.</p>
<h3 id="adjustments-for-3rd-party-display.">Adjustments for 3rd Party Display.</h3>
<ol type="1">
<li><p>As before the address of the display had to be adjusted.</p>
<ul>
<li>display.begin(SSD1306_SWITCHCAPVCC, 0x3C); // was 0x3D</li>
</ul></li>
<li><p>Had to make a change to Adafruit_SSD1306.had</p>
<p>At line 73 changed which line was commented out.</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c">   <span class="pp">#define SSD1306_128_64</span>
<span class="co">//   #define SSD1306_128_32</span>
<span class="co">//   #define SSD1306_96_16</span></code></pre></div>
<h3 id="forked-on-github">Forked on Github</h3>
<p>I forked the project on Github and made a new branch called 3rdparty.</p>
<ul>
<li><a href="https://github.com/danpeirce/Adafruit_SSD1306/tree/3rdparty" class="uri">https://github.com/danpeirce/Adafruit_SSD1306/tree/3rdparty</a></li>
<li><a href="https://github.com/adafruit/Adafruit_SSD1306/compare/master...danpeirce:3rdparty" class="uri">https://github.com/adafruit/Adafruit_SSD1306/compare/master...danpeirce:3rdparty</a></li>
</ul>
<h3 id="explore-text-branch">Explore Text Branch</h3>
<p>Added a new branch to fork of Adafruit_SSD1306 repository Called exploring_text.</p>
<ul>
<li><a href="https://github.com/danpeirce/Adafruit_SSD1306/blob/explore_text/examples/explore_text/explore_text.ino" class="uri">https://github.com/danpeirce/Adafruit_SSD1306/blob/explore_text/examples/explore_text/explore_text.ino</a></li>
</ul>
<figure>
<img src="explore_text.png" />
</figure>
<h3 id="terminal-branch">Terminal Branch</h3>
<p>Added a new branch to fork of Adafruit_SSD1306 called terminal. The intent is to be able to send serial strings to the Arduino that will act as a controller for the display. The stream of characters could come from any MCU which would not need the graphics library ported. Current testing is being done with Arduino serial monitor but will follow up with project MCU.</p>
<ol type="1">
<li>Runs Adafruit splash screen followed by Hello World KPU PHYS1600. It then waits for input and blanks the screen when input received, then shows text in top left of screen.</li>
<li>Display wraps to start of next line if it runs out of room on current line. A newline character will send it to beginning of next line.</li>
<li>If too much text is received new text is not visible.</li>
<li>Looks for a delimiter to clear screen and start at top left. Currently using &quot;~&quot; (tilde) as delimiter. Expect to change this to &quot;FF&quot;.</li>
<li>Thinking of adding codes to change font size. Using size 1 as default.</li>
<li>Discovered their is support to print both in landscape and portrait modes using a rotate method.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"> display.setRotation(<span class="dv">1</span>); <span class="co">// results in a portrait orientation for text on the screen</span></code></pre></div>
<ul>
<li><a href="https://github.com/danpeirce/Adafruit_SSD1306/blob/terminal/examples/explore_text/explore_text.ino" class="uri">https://github.com/danpeirce/Adafruit_SSD1306/blob/terminal/examples/explore_text/explore_text.ino</a></li>
</ul>
<figure>
<img src="rotate-display.png" />
</figure>
</body>
</html>
